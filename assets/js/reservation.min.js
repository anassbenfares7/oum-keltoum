const GOOGLE_SCRIPT_URL="https://script.google.com/macros/s/AKfycbxcQn_kv6QziJpoqrV0J08RIMYtbcCKOKkvorUy7gBab87DpKaCf0U9bIuEDZJcK9UJ/exec";document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("reservationForm"),t=e.querySelector('button[type="submit"]'),n=t.querySelector(".spinner-border"),o=t.querySelector(".button-text"),s=document.getElementById("formAlert"),a=document.getElementById("date"),d=(new Date).toISOString().split("T")[0];function r(e){t.disabled=e,n.classList.toggle("d-none",!e),o.classList.toggle("d-none",e)}function c(e,t){s.textContent=e,s.className=`alert alert-${t} text-center`,s.classList.remove("d-none")}a.min=d,e.addEventListener("submit",async function(t){if(t.preventDefault(),e.classList.remove("was-validated"),s.classList.add("d-none"),!e.checkValidity())return void e.classList.add("was-validated");const n={phone:document.getElementById("phone").value,people:document.getElementById("people").value,date:document.getElementById("date").value,time:document.getElementById("time").value,timestamp:(new Date).toISOString()};if(/^\d{8,}$/.test(n.phone))if(function(e){const t=new Date(e),n=new Date;return n.setHours(0,0,0,0),t>=n}(n.date)){r(!0);try{await fetch(GOOGLE_SCRIPT_URL,{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"},mode:"no-cors"});c("Réservation confirmée","success"),e.reset(),e.classList.remove("was-validated")}catch(e){c("Erreur de réservation. Veuillez réessayer.","danger")}r(!1)}else c("La date ne peut pas être dans le passé","danger");else c("Veuillez entrer un numéro de téléphone valide","danger")})});